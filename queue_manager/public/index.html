<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ALPEN.BOT SONGQ</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<div id="login-status" class="status-bar" style="display:none">
  <div class="status-user">
    <div id="login-avatar" class="status-avatar" aria-hidden="true"></div>
    <div class="status-info">
      <span id="login-name" class="status-name"></span>
      <span id="login-channel" class="status-channel"></span>
    </div>
  </div>
  <div class="status-actions">
    <button id="logout-btn" class="status-action">log out</button>
    <button id="logout-perm-btn" class="status-action danger">forget &amp; log out</button>
  </div>
</div>
<div id="landing" class="landing">
  <h1>ALPEN.BOT SONGQ</h1>
  <button id="login-btn">log in with Twitch</button>
  <div id="channel-list" class="channel-list"></div>
</div>

<div id="app" style="display:none">
  <div class="wrap">
    <div class="header">
      <div class="brand">Queue Manager</div>
      <span id="ch-badge" class="badge">channel: ?</span>
      <span id="bot-status" class="badge" hidden>bot: unknown</span>
      <button id="reg-btn" style="display:none"></button>
    </div>

    <div class="grid">
      <div class="card">
        <div class="tabs">
          <button id="tab-queue" class="tab active">Queue</button>
          <button id="tab-users" class="tab">Users</button>
          <button id="tab-settings" class="tab">Settings</button>
          <button id="tab-overlays" class="tab">Overlays</button>
        </div>

        <div id="queue-view">
          <h2>Active Queue</h2>
          <div class="queue-layout">
            <div class="queue-column">
              <div id="queue" class="queue"></div>
            </div>
            <div class="preview-column">
              <div class="preview-card">
                <div id="preview-video" class="preview-video empty">
                  <iframe id="preview-frame" title="YouTube preview" src="about:blank" loading="lazy" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                  <div id="preview-message" class="preview-message">Select a request to load YouTube Music matches.</div>
                </div>
                <div class="preview-link-group">
                  <label for="preview-url">Video link</label>
                  <div class="preview-link-row">
                    <input id="preview-url" type="text" value="" readonly aria-readonly="true"/>
                    <button id="preview-copy" type="button" disabled>Copy</button>
                  </div>
                </div>
                <div class="preview-results">
                  <div class="preview-results-header">
                    <span class="preview-results-title">YouTube Music results</span>
                    <span id="preview-status" class="preview-status muted"></span>
                  </div>
                  <div id="preview-results" class="preview-results-list"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="footer">
            <button id="archive-btn">Archive Stream</button>
            <button id="mute-btn">Toggle Requests</button>
          </div>
        </div>

        <div id="users-view" style="display:none">
          <h2>Users</h2>
          <div id="users" class="queue"></div>
        </div>

        <div id="settings-view" style="display:none">
          <h2>Settings</h2>
          <div id="settings"></div>
        </div>

        <div id="overlays-view" style="display:none">
          <h2>Overlay Builder</h2>
          <p class="muted">Design OBS browser sources that stay in sync with your live queue. Select options below and copy the generated link.</p>
          <div class="overlay-builder" aria-live="polite">
            <div class="overlay-controls">
              <div id="overlay-channel-warning" class="overlay-warning" hidden>Select a channel to generate overlay links.</div>
              <label>
                Overlay size &amp; layout
                <select id="overlay-layout">
                  <option value="bumped" data-width="400" data-height="300">Bumped songs (400×300)</option>
                  <option value="full" data-width="400" data-height="800">Full queue (400×800)</option>
                  <option value="banner" data-width="1920" data-height="200">Horizontal banner (1920×200)</option>
                </select>
              </label>
              <label>
                Color scheme
                <select id="overlay-theme">
                  <option value="violet">Midnight Violet</option>
                  <option value="ocean">Nordic Ocean</option>
                  <option value="sunset">Evening Sunset</option>
                  <option value="mint">Aurora Mint</option>
                </select>
              </label>
              <div class="overlay-link-group">
                <label for="overlay-url">Overlay link</label>
                <div class="overlay-link-row">
                  <input id="overlay-url" type="text" readonly value="" aria-readonly="true"/>
                  <button id="overlay-copy" type="button">Copy</button>
                </div>
                <div id="overlay-dimensions" class="overlay-dimensions muted"></div>
              </div>
            </div>
            <div class="overlay-preview">
              <div class="overlay-preview-frame">
                <iframe id="overlay-preview" title="Overlay preview" loading="lazy"></iframe>
                <div class="overlay-preview-hint muted">Preview background is transparent in OBS.</div>
              </div>
            </div>
          </div>
          <p class="overlay-hint muted">Add a new Browser Source in OBS, paste the link, and use the recommended size. The overlay updates itself whenever the queue changes.</p>
        </div>
      </div>
    </div>
  </div>
</div>
  <script src="config.js"></script>
  <script src="queue_manager.js"></script>
</body>
</html>
